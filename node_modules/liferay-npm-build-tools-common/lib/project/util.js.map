{"version":3,"sources":["../../src/project/util.js"],"names":["getFeaturesFilePath","project","featuresKeyPath","defaultPrjRelPosixPath","_npmbundlerrc","_projectDir","prjRelPosixPath","prop","get","undefined","join","FilePath","posix","asNative","defaultAbsPath","fs","existsSync"],"mappings":";;;;;QAkBgBA,mB,GAAAA,mB;;AAZhB;;;;AACA;;;;AAEA;;;;;;AAEA;;;;;;;AAOO,SAASA,mBAAT,CACNC,OADM,EAENC,eAFM,EAGNC,sBAHM,EAIL;AAAA,KACMC,aADN,GACoCH,OADpC,CACMG,aADN;AAAA,KACqBC,WADrB,GACoCJ,OADpC,CACqBI,WADrB;;;AAGD,KAAMC,kBAAkBC,kBAAKC,GAAL,CAASJ,aAAT,EAAwBF,eAAxB,CAAxB;;AAEA,KAAII,oBAAoBG,SAAxB,EAAmC;AAClC,SAAOJ,YAAYK,IAAZ,CAAiB,IAAIC,kBAAJ,CAAaL,eAAb,EAA8B,EAACM,OAAO,IAAR,EAA9B,CAAjB,EACLC,QADF;AAEA;;AAED,KAAMC,iBAAiBT,YAAYK,IAAZ,CACtB,IAAIC,kBAAJ,CAAaR,sBAAb,EAAqC,EAACS,OAAO,IAAR,EAArC,CADsB,EAErBC,QAFF;;AAIA,KAAIE,aAAGC,UAAH,CAAcF,cAAd,CAAJ,EAAmC;AAClC,SAAOA,cAAP;AACA;;AAED,QAAOL,SAAP;AACA,C,CAzCD","file":"util.js","sourcesContent":["/**\n * Â© 2017 Liferay, Inc. <https://liferay.com>\n *\n * SPDX-License-Identifier: LGPL-3.0-or-later\n */\n\nimport prop from 'dot-prop';\nimport fs from 'fs';\n\nimport FilePath from '../file-path';\n\n/**\n *\n * @param {Project} project\n * @param {string} featuresKey\n * @param {string} defaultPrjRelPosixPath a posix path relative to project root\n * @return {string|undefined} absolute path to features file\n */\nexport function getFeaturesFilePath(\n\tproject,\n\tfeaturesKeyPath,\n\tdefaultPrjRelPosixPath\n) {\n\tconst {_npmbundlerrc, _projectDir} = project;\n\n\tconst prjRelPosixPath = prop.get(_npmbundlerrc, featuresKeyPath);\n\n\tif (prjRelPosixPath !== undefined) {\n\t\treturn _projectDir.join(new FilePath(prjRelPosixPath, {posix: true}))\n\t\t\t.asNative;\n\t}\n\n\tconst defaultAbsPath = _projectDir.join(\n\t\tnew FilePath(defaultPrjRelPosixPath, {posix: true})\n\t).asNative;\n\n\tif (fs.existsSync(defaultAbsPath)) {\n\t\treturn defaultAbsPath;\n\t}\n\n\treturn undefined;\n}\n"]}